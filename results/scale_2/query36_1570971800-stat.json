{"status":{"state":"DONE"},"kind":"bigquery#job","statistics":{"totalSlotMs":"20828","creationTime":"1570971801752","totalBytesProcessed":"1114385965","startTime":"1570971801866","query":{"totalSlotMs":"20828","queryPlan":[{"readMsMax":"11","computeMsMax":"7","waitMsAvg":"1","id":"0","endMs":"1570971802090","waitMsMax":"1","startMs":"1570971802015","waitRatioMax":0.0003831417624521073,"readRatioAvg":0.00421455938697318,"parallelInputs":"1","recordsRead":"102","computeRatioAvg":0.0026819923371647508,"writeMsAvg":"5","status":"COMPLETE","writeMsMax":"5","computeMsAvg":"7","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0019157088122605363,"readMsAvg":"11","waitRatioAvg":0.0003831417624521073,"completedParallelInputs":"1","computeRatioMax":0.0026819923371647508,"name":"S00: Input","shuffleOutputBytes":"306","recordsWritten":"34","readRatioMax":0.00421455938697318,"steps":[{"kind":"READ","substeps":["$10:s_store_sk, $11:s_state","FROM store","WHERE in($11, 'TN', 'TN', 'TN', 'TN', 'TN', 'TN', 'TN', 'TN')"]},{"kind":"WRITE","substeps":["$10","TO __stage00_output","BY HASH($10)"]}],"writeRatioAvg":0.0019157088122605363},{"readMsMax":"10","computeMsMax":"83","waitMsAvg":"26","id":"1","endMs":"1570971802136","waitMsMax":"26","startMs":"1570971802055","waitRatioMax":0.00996168582375479,"readRatioAvg":0.0038314176245210726,"parallelInputs":"1","recordsRead":"102000","computeRatioAvg":0.031800766283524906,"writeMsAvg":"13","status":"COMPLETE","writeMsMax":"13","computeMsAvg":"83","shuffleOutputBytesSpilled":"0","writeRatioMax":0.004980842911877395,"readMsAvg":"10","waitRatioAvg":0.00996168582375479,"completedParallelInputs":"1","computeRatioMax":0.031800766283524906,"name":"S01: Input","shuffleOutputBytes":"3328173","recordsWritten":"102000","readRatioMax":0.0038314176245210726,"steps":[{"kind":"READ","substeps":["$1:i_item_sk, $2:i_class, $3:i_category","FROM item"]},{"kind":"WRITE","substeps":["$1, $2, $3","TO __stage01_output","BY HASH($1)"]}],"writeRatioAvg":0.004980842911877395},{"readMsMax":"15","computeMsMax":"9","waitMsAvg":"41","id":"2","endMs":"1570971802204","waitMsMax":"41","startMs":"1570971802090","waitRatioMax":0.015708812260536397,"readRatioAvg":0.005747126436781609,"parallelInputs":"1","recordsRead":"73049","computeRatioAvg":0.0034482758620689655,"writeMsAvg":"39","status":"COMPLETE","writeMsMax":"39","computeMsAvg":"9","shuffleOutputBytesSpilled":"0","writeRatioMax":0.014942528735632184,"readMsAvg":"15","waitRatioAvg":0.015708812260536397,"completedParallelInputs":"1","computeRatioMax":0.0034482758620689655,"name":"S02: Input","shuffleOutputBytes":"3294","recordsWritten":"366","readRatioMax":0.005747126436781609,"steps":[{"kind":"READ","substeps":["$30:d_date_sk, $31:d_year","FROM date_dim","WHERE equal($31, 2000)"]},{"kind":"WRITE","substeps":["$30","TO __stage02_output","BY HASH($30)"]}],"writeRatioAvg":0.014942528735632184},{"readMsMax":"64","computeMsMax":"2610","inputStages":["0","1","2"],"waitMsAvg":"3","id":"4","endMs":"1570971803995","waitMsMax":"6","startMs":"1570971802298","waitRatioMax":0.0022988505747126436,"readRatioAvg":0.013793103448275862,"parallelInputs":"10","recordsRead":"29826112","computeRatioAvg":0.8383141762452108,"writeMsAvg":"5","status":"COMPLETE","writeMsMax":"13","computeMsAvg":"2188","shuffleOutputBytesSpilled":"0","writeRatioMax":0.004980842911877395,"readMsAvg":"36","waitRatioAvg":0.0011494252873563218,"completedParallelInputs":"10","computeRatioMax":1,"name":"S04: Join+","shuffleOutputBytes":"60282","recordsWritten":"1572","readRatioMax":0.024521072796934867,"steps":[{"kind":"READ","substeps":["$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_store_sk, $23:ss_ext_sales_price, $24:ss_net_profit","FROM store_sales"]},{"kind":"READ","substeps":["$30","FROM __stage02_output"]},{"kind":"READ","substeps":["$1, $2, $3","FROM __stage01_output"]},{"kind":"READ","substeps":["$10","FROM __stage00_output"]},{"kind":"AGGREGATE","substeps":["GROUP BY $110 := $101, $111 := $100","$70 := SUM($103)","$71 := SUM($102)"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $90 = $10"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $80 = $1"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $20 = $30"]},{"kind":"WRITE","substeps":["$111, $110, $70, $71","TO __stage04_output","BY HASH($110, $111)"]}],"writeRatioAvg":0.0019157088122605363},{"readMsMax":"0","computeMsMax":"5","inputStages":["4"],"waitMsAvg":"1","id":"5","endMs":"1570971804080","waitMsMax":"1","startMs":"1570971804031","waitRatioMax":0.0003831417624521073,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"1572","computeRatioAvg":0.0019157088122605363,"writeMsAvg":"24","status":"COMPLETE","writeMsMax":"24","computeMsAvg":"5","shuffleOutputBytesSpilled":"0","writeRatioMax":0.009195402298850575,"readMsAvg":"0","waitRatioAvg":0.0003831417624521073,"completedParallelInputs":"1","computeRatioMax":0.0019157088122605363,"name":"S05: Aggregate+","shuffleOutputBytes":"4631","recordsWritten":"158","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$111, $110, $70, $71","FROM __stage04_output"]},{"kind":"COMPUTE","substeps":["$50 := divide($60, $61)"]},{"kind":"AGGREGATE","substeps":["GROUP BY $120 := $110, $121 := $111","$60 := SUM($70)","$61 := SUM($71)"]},{"kind":"WRITE","substeps":["$121, $120, $50","TO __stage05_output","BY HASH($120, $121)"]}],"writeRatioAvg":0.009195402298850575},{"readMsMax":"0","computeMsMax":"3","inputStages":["5"],"waitMsAvg":"1","id":"6","endMs":"1570971804151","waitMsMax":"1","startMs":"1570971804083","waitRatioMax":0.0003831417624521073,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"158","computeRatioAvg":0.0011494252873563218,"writeMsAvg":"57","status":"COMPLETE","writeMsMax":"57","computeMsAvg":"3","shuffleOutputBytesSpilled":"0","writeRatioMax":0.021839080459770115,"readMsAvg":"0","waitRatioAvg":0.0003831417624521073,"completedParallelInputs":"1","computeRatioMax":0.0011494252873563218,"name":"S06: Sort+","shuffleOutputBytes":"3737","recordsWritten":"100","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$121, $120, $50","FROM __stage05_output"]},{"kind":"SORT","substeps":["$141 ASC, $40 ASC","LIMIT 100"]},{"kind":"ANALYTIC_FUNCTION","substeps":["$40 := RANK() OVER (PARTITION BY $131, $130 ORDER BY $132 ASC)"]},{"kind":"SORT","substeps":["$120 ASC, $121 ASC, $50 ASC"]},{"kind":"WRITE","substeps":["$150, $151, $152, $153","TO __stage06_output"]}],"writeRatioAvg":0.021839080459770115},{"readMsMax":"0","computeMsMax":"9","inputStages":["6"],"waitMsAvg":"1","id":"7","endMs":"1570971804169","waitMsMax":"1","startMs":"1570971804110","waitRatioMax":0.0003831417624521073,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"100","computeRatioAvg":0.0034482758620689655,"writeMsAvg":"8","status":"COMPLETE","writeMsMax":"8","computeMsAvg":"9","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0030651340996168583,"readMsAvg":"0","waitRatioAvg":0.0003831417624521073,"completedParallelInputs":"1","computeRatioMax":0.0034482758620689655,"name":"S07: Output","shuffleOutputBytes":"3737","recordsWritten":"100","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$150, $151, $152, $153","FROM __stage06_output"]},{"kind":"SORT","substeps":["$151 ASC, $152 ASC","LIMIT 100"]},{"kind":"WRITE","substeps":["$160, $161, $162, $163","TO __stage07_output"]}],"writeRatioAvg":0.0030651340996168583}],"estimatedBytesProcessed":"1114385965","timeline":[{"totalSlotMs":"885","activeUnits":"10","completedUnits":"3","elapsedMs":"649","pendingUnits":"10"},{"totalSlotMs":"20828","activeUnits":"6","completedUnits":"16","elapsedMs":"2475","pendingUnits":"0"}],"statementType":"SELECT","totalBytesBilled":"1114636288","totalPartitionsProcessed":"0","totalBytesProcessed":"1114385965","cacheHit":false,"billingTier":1,"referencedTables":[{"projectId":"tpc-ds-2019","tableId":"date_dim","datasetId":"scale_10"},{"projectId":"tpc-ds-2019","tableId":"item","datasetId":"scale_10"},{"projectId":"tpc-ds-2019","tableId":"store","datasetId":"scale_10"},{"projectId":"tpc-ds-2019","tableId":"store_sales","datasetId":"scale_10"}]},"endTime":"1570971804363"},"jobReference":{"projectId":"tpc-ds-2019","location":"US","jobId":"query36_1570971800"},"etag":"rSwRWc/bfnOIxw9JR3sUxQ==","selfLink":"https://bigquery.googleapis.com/bigquery/v2/projects/tpc-ds-2019/jobs/query36_1570971800?location=US","configuration":{"query":{"maximumBillingTier":10,"defaultDataset":{"projectId":"tpc-ds-2019","datasetId":"scale_10"},"useLegacySql":false,"destinationTable":{"projectId":"tpc-ds-2019","tableId":"anon87c1866fd50f5d0b2b9dcf971efbaca36bc178db","datasetId":"_0ca6f7c7da88564ba26827da43395a8255e28ecd"},"priority":"INTERACTIVE","writeDisposition":"WRITE_TRUNCATE","createDisposition":"CREATE_IF_NEEDED","query":"-- query36\nSELECT Sum(ss_net_profit) / Sum(ss_ext_sales_price) AS \n gross_margin, \n i_category, \n i_class, \n Rank() \n OVER ( \n PARTITION BY i_category, i_class \n ORDER BY Sum(ss_net_profit)/Sum(ss_ext_sales_price) ASC) AS \n rank_within_parent \nFROM store_sales, \n date_dim d1, \n item, \n store \nWHERE d1.d_year = 2000 \n AND d1.d_date_sk = ss_sold_date_sk \n AND i_item_sk = ss_item_sk \n AND s_store_sk = ss_store_sk \n AND s_state IN ( 'TN', 'TN', 'TN', 'TN', \n 'TN', 'TN', 'TN', 'TN' ) \nGROUP BY i_category, i_class \nORDER BY i_category, \n rank_within_parent\nLIMIT 100; \n"},"jobType":"QUERY"},"id":"tpc-ds-2019:US.query36_1570971800","user_email":"nithish.sankaranarayanan@ulb.be"}
