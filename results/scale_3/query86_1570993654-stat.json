{"status":{"state":"DONE"},"kind":"bigquery#job","statistics":{"totalSlotMs":"103472","creationTime":"1570993655915","totalBytesProcessed":"1697494473","startTime":"1570993656040","query":{"totalSlotMs":"103472","queryPlan":[{"readMsMax":"13","computeMsMax":"169","waitMsAvg":"3","id":"0","endMs":"1570993656818","waitMsMax":"3","startMs":"1570993656223","waitRatioMax":0.005747126436781609,"readRatioAvg":0.02490421455938697,"parallelInputs":"1","recordsRead":"204000","computeRatioAvg":0.32375478927203066,"writeMsAvg":"10","status":"COMPLETE","writeMsMax":"10","computeMsAvg":"169","shuffleOutputBytesSpilled":"0","writeRatioMax":0.019157088122605363,"readMsAvg":"13","waitRatioAvg":0.005747126436781609,"completedParallelInputs":"1","computeRatioMax":0.32375478927203066,"name":"S00: Input","shuffleOutputBytes":"6655961","recordsWritten":"204000","readRatioMax":0.02490421455938697,"steps":[{"kind":"READ","substeps":["$1:i_item_sk, $2:i_class, $3:i_category","FROM item"]},{"kind":"WRITE","substeps":["$1, $2, $3","TO __stage00_output","BY HASH($1)"]}],"writeRatioAvg":0.019157088122605363},{"readMsMax":"12","computeMsMax":"10","waitMsAvg":"25","id":"1","endMs":"1570993657543","waitMsMax":"25","startMs":"1570993656262","waitRatioMax":0.04789272030651341,"readRatioAvg":0.022988505747126436,"parallelInputs":"1","recordsRead":"73049","computeRatioAvg":0.019157088122605363,"writeMsAvg":"7","status":"COMPLETE","writeMsMax":"7","computeMsAvg":"10","shuffleOutputBytesSpilled":"0","writeRatioMax":0.013409961685823755,"readMsAvg":"12","waitRatioAvg":0.04789272030651341,"completedParallelInputs":"1","computeRatioMax":0.019157088122605363,"name":"S01: Input","shuffleOutputBytes":"3285","recordsWritten":"365","readRatioMax":0.022988505747126436,"steps":[{"kind":"READ","substeps":["$20:d_date_sk, $21:d_month_seq","FROM date_dim","WHERE between($21, 1183, 1194)"]},{"kind":"WRITE","substeps":["$20","TO __stage01_output","BY HASH($20)"]}],"writeRatioAvg":0.013409961685823755},{"readMsMax":"209","computeMsMax":"522","inputStages":["0","1"],"waitMsAvg":"1","id":"3","endMs":"1570993658407","waitMsMax":"2","startMs":"1570993657736","waitRatioMax":0.0038314176245210726,"readRatioAvg":0.06130268199233716,"parallelInputs":"92","recordsRead":"89275655","computeRatioAvg":0.7835249042145593,"writeMsAvg":"13","status":"COMPLETE","writeMsMax":"340","computeMsAvg":"409","shuffleOutputBytesSpilled":"0","writeRatioMax":0.6513409961685823,"readMsAvg":"32","waitRatioAvg":0.0019157088122605363,"completedParallelInputs":"92","computeRatioMax":1,"name":"S03: Join+","shuffleOutputBytes":"435646","recordsWritten":"14980","readRatioMax":0.4003831417624521,"steps":[{"kind":"READ","substeps":["$10:ws_sold_date_sk, $11:ws_item_sk, $12:ws_net_paid","FROM web_sales"]},{"kind":"READ","substeps":["$20","FROM __stage01_output"]},{"kind":"READ","substeps":["$1, $2, $3","FROM __stage00_output"]},{"kind":"AGGREGATE","substeps":["GROUP BY $80 := $72, $81 := $71","$50 := SUM($70)"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $60 = $1"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $10 = $20"]},{"kind":"WRITE","substeps":["$81, $80, $50","TO __stage03_output","BY HASH($80, $81)"]}],"writeRatioAvg":0.02490421455938697},{"readMsMax":"0","computeMsMax":"10","inputStages":["3"],"waitMsAvg":"1","id":"4","endMs":"1570993658537","waitMsMax":"1","startMs":"1570993658472","waitRatioMax":0.0019157088122605363,"readRatioAvg":0,"parallelInputs":"9","recordsRead":"14980","computeRatioAvg":0.013409961685823755,"writeMsAvg":"9","status":"COMPLETE","writeMsMax":"13","computeMsAvg":"7","shuffleOutputBytesSpilled":"0","writeRatioMax":0.02490421455938697,"readMsAvg":"0","waitRatioAvg":0.0019157088122605363,"completedParallelInputs":"9","computeRatioMax":0.019157088122605363,"name":"S04: Aggregate","shuffleOutputBytes":"4923","recordsWritten":"171","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$81, $80, $50","FROM __stage03_output"]},{"kind":"AGGREGATE","substeps":["GROUP BY $90 := $80, $91 := $81","$40 := SUM($50)"]},{"kind":"WRITE","substeps":["$91, $90, $40","TO __stage04_output","BY HASH($90, $91)"]}],"writeRatioAvg":0.017241379310344827},{"readMsMax":"0","computeMsMax":"7","inputStages":["4"],"waitMsAvg":"3","id":"5","endMs":"1570993658649","waitMsMax":"4","startMs":"1570993658561","waitRatioMax":0.007662835249042145,"readRatioAvg":0,"parallelInputs":"9","recordsRead":"171","computeRatioAvg":0.009578544061302681,"writeMsAvg":"27","status":"COMPLETE","writeMsMax":"31","computeMsAvg":"5","shuffleOutputBytesSpilled":"0","writeRatioMax":0.05938697318007663,"readMsAvg":"0","waitRatioAvg":0.005747126436781609,"completedParallelInputs":"9","computeRatioMax":0.013409961685823755,"name":"S05: Sort+","shuffleOutputBytes":"6462","recordsWritten":"171","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$91, $90, $40","FROM __stage04_output"]},{"kind":"SORT","substeps":["$111 ASC, $30 ASC","LIMIT 100"]},{"kind":"ANALYTIC_FUNCTION","substeps":["$30 := RANK() OVER (PARTITION BY $101, $100 ORDER BY $102 DESC)"]},{"kind":"SORT","substeps":["$90 ASC, $91 ASC, $40 DESC"]},{"kind":"WRITE","substeps":["$120, $121, $122, $123","TO __stage05_output"]}],"writeRatioAvg":0.05172413793103448},{"readMsMax":"0","computeMsMax":"6","inputStages":["5"],"waitMsAvg":"2","id":"6","endMs":"1570993658673","waitMsMax":"2","startMs":"1570993658577","waitRatioMax":0.0038314176245210726,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"171","computeRatioAvg":0.011494252873563218,"writeMsAvg":"6","status":"COMPLETE","writeMsMax":"6","computeMsAvg":"6","shuffleOutputBytesSpilled":"0","writeRatioMax":0.011494252873563218,"readMsAvg":"0","waitRatioAvg":0.0038314176245210726,"completedParallelInputs":"1","computeRatioMax":0.011494252873563218,"name":"S06: Output","shuffleOutputBytes":"3632","recordsWritten":"100","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$120, $121, $122, $123","FROM __stage05_output"]},{"kind":"SORT","substeps":["$121 ASC, $122 ASC","LIMIT 100"]},{"kind":"WRITE","substeps":["$130, $131, $132, $133","TO __stage06_output"]}],"writeRatioAvg":0.011494252873563218}],"estimatedBytesProcessed":"1697494473","timeline":[{"totalSlotMs":"5728","activeUnits":"60","completedUnits":"1","elapsedMs":"684","pendingUnits":"93"},{"totalSlotMs":"63073","activeUnits":"92","completedUnits":"2","elapsedMs":"1714","pendingUnits":"92"},{"totalSlotMs":"103472","activeUnits":"0","completedUnits":"113","elapsedMs":"2802","pendingUnits":"0"}],"statementType":"SELECT","totalBytesBilled":"1697644544","totalPartitionsProcessed":"0","totalBytesProcessed":"1697494473","cacheHit":false,"billingTier":1,"referencedTables":[{"projectId":"tpc-ds-2019","tableId":"date_dim","datasetId":"scale_100"},{"projectId":"tpc-ds-2019","tableId":"item","datasetId":"scale_100"},{"projectId":"tpc-ds-2019","tableId":"web_sales","datasetId":"scale_100"}]},"endTime":"1570993658871"},"jobReference":{"projectId":"tpc-ds-2019","location":"US","jobId":"query86_1570993654"},"etag":"RhF3kh7pKWuNDo1bk81UeQ==","selfLink":"https://bigquery.googleapis.com/bigquery/v2/projects/tpc-ds-2019/jobs/query86_1570993654?location=US","configuration":{"query":{"maximumBillingTier":10,"defaultDataset":{"projectId":"tpc-ds-2019","datasetId":"scale_100"},"useLegacySql":false,"destinationTable":{"projectId":"tpc-ds-2019","tableId":"anon036fe66e253095987322692a711871199ab04eb7","datasetId":"_0ca6f7c7da88564ba26827da43395a8255e28ecd"},"priority":"INTERACTIVE","writeDisposition":"WRITE_TRUNCATE","createDisposition":"CREATE_IF_NEEDED","query":"-- query86\nSELECT Sum(ws_net_paid) AS total_sum, \n i_category, \n i_class, \n Rank() \n OVER ( \n PARTITION BY i_category, i_class\n ORDER BY Sum(ws_net_paid) DESC) AS rank_within_parent \nFROM web_sales, \n date_dim d1, \n item \nWHERE d1.d_month_seq BETWEEN 1183 AND 1183 + 11 \n AND d1.d_date_sk = ws_sold_date_sk \n AND i_item_sk = ws_item_sk \nGROUP BY i_category, i_class \nORDER BY i_category, \n rank_within_parent\nLIMIT 100; \n"},"jobType":"QUERY"},"id":"tpc-ds-2019:US.query86_1570993654","user_email":"nithish.sankaranarayanan@ulb.be"}
