{"status":{"state":"DONE"},"kind":"bigquery#job","statistics":{"totalSlotMs":"65112","creationTime":"1570971372707","totalBytesProcessed":"686257544","startTime":"1570971372825","query":{"totalSlotMs":"65112","queryPlan":[{"readMsMax":"8","computeMsMax":"5","waitMsAvg":"1","id":"0","endMs":"1570971373002","waitMsMax":"1","startMs":"1570971372982","waitRatioMax":0.0002605523710265763,"readRatioAvg":0.0020844189682126106,"parallelInputs":"1","recordsRead":"73049","computeRatioAvg":0.0013027618551328818,"writeMsAvg":"3","status":"COMPLETE","writeMsMax":"3","computeMsAvg":"5","shuffleOutputBytesSpilled":"0","writeRatioMax":0.000781657113079729,"readMsAvg":"8","waitRatioAvg":0.0002605523710265763,"completedParallelInputs":"1","computeRatioMax":0.0013027618551328818,"name":"S00: Input","shuffleOutputBytes":"9","recordsWritten":"1","readRatioMax":0.0020844189682126106,"steps":[{"kind":"READ","substeps":["$60:d_month_seq, $61:d_year, $62:d_moy","FROM date_dim","WHERE and(equal($61, 1998), equal($62, 7))"]},{"kind":"AGGREGATE","substeps":["GROUP BY $120 := $60"]},{"kind":"WRITE","substeps":["$120","TO __stage00_output","BY HASH($120)"]}],"writeRatioAvg":0.000781657113079729},{"readMsMax":"45","computeMsMax":"19","waitMsAvg":"4","id":"1","endMs":"1570971373066","waitMsMax":"4","startMs":"1570971373002","waitRatioMax":0.0010422094841063053,"readRatioAvg":0.011724856696195935,"parallelInputs":"1","recordsRead":"102000","computeRatioAvg":0.0049504950495049506,"writeMsAvg":"4","status":"COMPLETE","writeMsMax":"4","computeMsAvg":"19","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0010422094841063053,"readMsAvg":"45","waitRatioAvg":0.0010422094841063053,"completedParallelInputs":"1","computeRatioMax":0.0049504950495049506,"name":"S01: Input","shuffleOutputBytes":"297","recordsWritten":"11","readRatioMax":0.011724856696195935,"steps":[{"kind":"READ","substeps":["$10:i_current_price, $11:i_category","FROM item"]},{"kind":"AGGREGATE","substeps":["GROUP BY $180 := $11","$110 := SHARD_AVG($10)"]},{"kind":"WRITE","substeps":["$180, $110","TO __stage01_output","BY HASH($180)"]}],"writeRatioAvg":0.0010422094841063053},{"readMsMax":"0","computeMsMax":"4","inputStages":["0"],"waitMsAvg":"8","id":"2","endMs":"1570971373042","waitMsMax":"8","startMs":"1570971373022","waitRatioMax":0.0020844189682126106,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"1","computeRatioAvg":0.0010422094841063053,"writeMsAvg":"4","status":"COMPLETE","writeMsMax":"4","computeMsAvg":"4","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0010422094841063053,"readMsAvg":"0","waitRatioAvg":0.0020844189682126106,"completedParallelInputs":"1","computeRatioMax":0.0010422094841063053,"name":"S02: Aggregate+","shuffleOutputBytes":"9","recordsWritten":"1","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$120","FROM __stage00_output"]},{"kind":"LIMIT","substeps":["2"]},{"kind":"AGGREGATE","substeps":["GROUP BY $130 := $120"]},{"kind":"WRITE","substeps":["$130","TO __stage02_output"]}],"writeRatioAvg":0.0010422094841063053},{"readMsMax":"0","computeMsMax":"6","inputStages":["2"],"waitMsAvg":"9","id":"3","endMs":"1570971373122","waitMsMax":"9","startMs":"1570971373023","waitRatioMax":0.002344971339239187,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"1","computeRatioAvg":0.001563314226159458,"writeMsAvg":"19","status":"COMPLETE","writeMsMax":"19","computeMsAvg":"6","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0049504950495049506,"readMsAvg":"0","waitRatioAvg":0.002344971339239187,"completedParallelInputs":"1","computeRatioMax":0.001563314226159458,"name":"S03: Aggregate","shuffleOutputBytes":"9","recordsWritten":"1","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$130","FROM __stage02_output"]},{"kind":"AGGREGATE","substeps":["$100 := ANY_AND_CHECK($130)"]},{"kind":"WRITE","substeps":["$100","TO __stage03_output"]}],"writeRatioAvg":0.0049504950495049506},{"readMsMax":"0","computeMsMax":"8","inputStages":["1"],"waitMsAvg":"1","id":"4","endMs":"1570971373238","waitMsMax":"1","startMs":"1570971373144","waitRatioMax":0.0002605523710265763,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"11","computeRatioAvg":0.0020844189682126106,"writeMsAvg":"75","status":"COMPLETE","writeMsMax":"75","computeMsAvg":"8","shuffleOutputBytesSpilled":"0","writeRatioMax":0.019541427826993224,"readMsAvg":"0","waitRatioAvg":0.0002605523710265763,"completedParallelInputs":"1","computeRatioMax":0.0020844189682126106,"name":"S04: Aggregate","shuffleOutputBytes":"199","recordsWritten":"10","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$180, $110","FROM __stage01_output"]},{"kind":"AGGREGATE","substeps":["GROUP BY $190 := $180","$90 := ROOT_AVG($110)"]},{"kind":"WRITE","substeps":["$90, $190","TO __stage04_output","BY HASH($190)"]}],"writeRatioAvg":0.019541427826993224},{"readMsMax":"12","computeMsMax":"98","waitMsAvg":"1","id":"5","endMs":"1570971373779","waitMsMax":"1","startMs":"1570971373164","waitRatioMax":0.0002605523710265763,"readRatioAvg":0.003126628452318916,"parallelInputs":"1","recordsRead":"102000","computeRatioAvg":0.02553413236060448,"writeMsAvg":"11","status":"COMPLETE","writeMsMax":"11","computeMsAvg":"98","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0028660760812923396,"readMsAvg":"12","waitRatioAvg":0.0002605523710265763,"completedParallelInputs":"1","computeRatioMax":0.02553413236060448,"name":"S05: Input","shuffleOutputBytes":"2943220","recordsWritten":"102000","readRatioMax":0.003126628452318916,"steps":[{"kind":"READ","substeps":["$1:i_item_sk, $2:i_current_price, $3:i_category","FROM item"]},{"kind":"WRITE","substeps":["$1, $2, $3","TO __stage05_output","BY HASH($1)"]}],"writeRatioAvg":0.0028660760812923396},{"readMsMax":"11","computeMsMax":"15","waitMsAvg":"2","id":"6","endMs":"1570971373281","waitMsMax":"2","startMs":"1570971373181","waitRatioMax":0.0005211047420531526,"readRatioAvg":0.0028660760812923396,"parallelInputs":"1","recordsRead":"73050","computeRatioAvg":0.0039082855653986455,"writeMsAvg":"71","status":"COMPLETE","writeMsMax":"71","computeMsAvg":"15","shuffleOutputBytesSpilled":"0","writeRatioMax":0.01849921834288692,"readMsAvg":"11","waitRatioAvg":0.0005211047420531526,"completedParallelInputs":"1","computeRatioMax":0.0039082855653986455,"name":"S06: Input","shuffleOutputBytes":"279","recordsWritten":"31","readRatioMax":0.0028660760812923396,"steps":[{"kind":"READ","substeps":["$100","FROM __stage03_output"]},{"kind":"READ","substeps":["$30:d_date_sk, $31:d_month_seq","FROM date_dim"]},{"kind":"FILTER","substeps":["equal($31, $100)"]},{"kind":"WRITE","substeps":["$30","TO __stage06_output","BY HASH($30)"]}],"writeRatioAvg":0.01849921834288692},{"readMsMax":"82","computeMsMax":"146","waitMsAvg":"1","id":"9","endMs":"1570971373546","waitMsMax":"1","startMs":"1570971373231","waitRatioMax":0.0002605523710265763,"readRatioAvg":0.02136529442417926,"parallelInputs":"1","recordsRead":"250000","computeRatioAvg":0.03804064616988015,"writeMsAvg":"16","status":"COMPLETE","writeMsMax":"16","computeMsAvg":"146","shuffleOutputBytesSpilled":"0","writeRatioMax":0.004168837936425221,"readMsAvg":"82","waitRatioAvg":0.0002605523710265763,"completedParallelInputs":"1","computeRatioMax":0.03804064616988015,"name":"S09: Input","shuffleOutputBytes":"3955444","recordsWritten":"250000","readRatioMax":0.02136529442417926,"steps":[{"kind":"READ","substeps":["$40:ca_address_sk, $41:ca_state","FROM customer_address"]},{"kind":"WRITE","substeps":["$40, $41","TO __stage09_output","BY HASH($40)"]}],"writeRatioAvg":0.004168837936425221},{"readMsMax":"18","computeMsMax":"875","inputStages":["9"],"waitMsAvg":"1","id":"10","endMs":"1570971374140","waitMsMax":"1","startMs":"1570971373643","waitRatioMax":0.0002605523710265763,"readRatioAvg":0.004689942678478374,"parallelInputs":"1","recordsRead":"750000","computeRatioAvg":0.2279833246482543,"writeMsAvg":"48","status":"COMPLETE","writeMsMax":"48","computeMsAvg":"875","shuffleOutputBytesSpilled":"0","writeRatioMax":0.012506513809275664,"readMsAvg":"18","waitRatioAvg":0.0002605523710265763,"completedParallelInputs":"1","computeRatioMax":0.2279833246482543,"name":"S0A: Join","shuffleOutputBytes":"7910888","recordsWritten":"500000","readRatioMax":0.004689942678478374,"steps":[{"kind":"READ","substeps":["$50:c_customer_sk, $51:c_current_addr_sk","FROM customer"]},{"kind":"READ","substeps":["$40, $41","FROM __stage09_output"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $51 = $40"]},{"kind":"WRITE","substeps":["$140, $141","TO __stage0A_output","BY HASH($141)"]}],"writeRatioAvg":0.012506513809275664},{"readMsMax":"0","computeMsMax":"69","inputStages":["10"],"waitMsAvg":"1","id":"11","endMs":"1570971374396","waitMsMax":"3","startMs":"1570971374245","waitRatioMax":0.000781657113079729,"readRatioAvg":0,"parallelInputs":"100","recordsRead":"500000","computeRatioAvg":0.0020844189682126106,"writeMsAvg":"43","status":"COMPLETE","writeMsMax":"66","computeMsAvg":"8","shuffleOutputBytesSpilled":"0","writeRatioMax":0.017196456487754037,"readMsAvg":"0","waitRatioAvg":0.0002605523710265763,"completedParallelInputs":"100","computeRatioMax":0.01797811360083377,"name":"S0B: Coalesce","shuffleOutputBytes":"7910888","recordsWritten":"500000","readRatioMax":0,"steps":[{"kind":"READ","substeps":["FROM __stage0A_output"]}],"writeRatioAvg":0.011203751954142784},{"readMsMax":"0","computeMsMax":"10","inputStages":["6"],"waitMsAvg":"3","id":"12","endMs":"1570971374372","waitMsMax":"5","startMs":"1570971374246","waitRatioMax":0.0013027618551328818,"readRatioAvg":0,"parallelInputs":"100","recordsRead":"31","computeRatioAvg":0.0013027618551328818,"writeMsAvg":"27","status":"COMPLETE","writeMsMax":"58","computeMsAvg":"5","shuffleOutputBytesSpilled":"0","writeRatioMax":0.015112037519541427,"readMsAvg":"0","waitRatioAvg":0.000781657113079729,"completedParallelInputs":"100","computeRatioMax":0.0026055237102657635,"name":"S0C: Coalesce","shuffleOutputBytes":"279","recordsWritten":"31","readRatioMax":0,"steps":[{"kind":"READ","substeps":["FROM __stage06_output"]}],"writeRatioAvg":0.0070349140177175615},{"readMsMax":"0","computeMsMax":"10","inputStages":["4"],"waitMsAvg":"5","id":"13","endMs":"1570971374370","waitMsMax":"7","startMs":"1570971374245","waitRatioMax":0.0018238665971860343,"readRatioAvg":0,"parallelInputs":"100","recordsRead":"10","computeRatioAvg":0.0013027618551328818,"writeMsAvg":"25","status":"COMPLETE","writeMsMax":"57","computeMsAvg":"5","shuffleOutputBytesSpilled":"0","writeRatioMax":0.01485148514851485,"readMsAvg":"0","waitRatioAvg":0.0013027618551328818,"completedParallelInputs":"100","computeRatioMax":0.0026055237102657635,"name":"S0D: Coalesce","shuffleOutputBytes":"199","recordsWritten":"10","readRatioMax":0,"steps":[{"kind":"READ","substeps":["FROM __stage04_output"]}],"writeRatioAvg":0.006513809275664409},{"readMsMax":"41","computeMsMax":"3838","inputStages":["3","13","5","12","11"],"waitMsAvg":"1","id":"14","endMs":"1570971376531","waitMsMax":"1","startMs":"1570971374282","waitRatioMax":0.0002605523710265763,"readRatioAvg":0.008598228243877019,"parallelInputs":"10","recordsRead":"34822532","computeRatioAvg":0.8535695674830641,"writeMsAvg":"5","status":"COMPLETE","writeMsMax":"7","computeMsAvg":"3276","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0018238665971860343,"readMsAvg":"33","waitRatioAvg":0.0002605523710265763,"completedParallelInputs":"10","computeRatioMax":1,"name":"S0E: Join+","shuffleOutputBytes":"8148","recordsWritten":"513","readRatioMax":0.01068264721208963,"steps":[{"kind":"READ","substeps":["$100","FROM __stage03_output"]},{"kind":"READ","substeps":["$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_customer_sk","FROM store_sales"]},{"kind":"READ","substeps":["$140, $141","FROM __stage0B_output"]},{"kind":"READ","substeps":["$30","FROM __stage0C_output"]},{"kind":"READ","substeps":["$1, $2, $3","FROM __stage05_output"]},{"kind":"READ","substeps":["$90, $190","FROM __stage0D_output"]},{"kind":"AGGREGATE","substeps":["GROUP BY $210 := $201","$80 := COUNT_STAR()"]},{"kind":"FILTER","substeps":["greater($200, multiply(1.2, $202))"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $172 = $190"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $160 = $1"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $151 = $30"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $22 = $141"]},{"kind":"WRITE","substeps":["$210, $80","TO __stage0E_output","BY HASH($210)"]}],"writeRatioAvg":0.0013027618551328818},{"readMsMax":"0","computeMsMax":"4","inputStages":["14"],"waitMsAvg":"3","id":"15","endMs":"1570971376731","waitMsMax":"3","startMs":"1570971376537","waitRatioMax":0.000781657113079729,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"513","computeRatioAvg":0.0010422094841063053,"writeMsAvg":"150","status":"COMPLETE","writeMsMax":"150","computeMsAvg":"4","shuffleOutputBytesSpilled":"0","writeRatioMax":0.03908285565398645,"readMsAvg":"0","waitRatioAvg":0.000781657113079729,"completedParallelInputs":"1","computeRatioMax":0.0010422094841063053,"name":"S0F: Sort+","shuffleOutputBytes":"810","recordsWritten":"51","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$210, $80","FROM __stage0E_output"]},{"kind":"SORT","substeps":["$70 ASC","LIMIT 100"]},{"kind":"FILTER","substeps":["greater_or_equal($70, 10)"]},{"kind":"AGGREGATE","substeps":["GROUP BY $220 := $210","$70 := SUM_OF_COUNTS($80)"]},{"kind":"WRITE","substeps":["$230, $231","TO __stage0F_output"]}],"writeRatioAvg":0.03908285565398645},{"readMsMax":"0","computeMsMax":"5","inputStages":["15"],"waitMsAvg":"1","id":"16","endMs":"1570971376761","waitMsMax":"1","startMs":"1570971376639","waitRatioMax":0.0002605523710265763,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"51","computeRatioAvg":0.0013027618551328818,"writeMsAvg":"4","status":"COMPLETE","writeMsMax":"4","computeMsAvg":"5","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0010422094841063053,"readMsAvg":"0","waitRatioAvg":0.0002605523710265763,"completedParallelInputs":"1","computeRatioMax":0.0013027618551328818,"name":"S10: Output","shuffleOutputBytes":"810","recordsWritten":"51","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$230, $231","FROM __stage0F_output"]},{"kind":"SORT","substeps":["$231 ASC","LIMIT 100"]},{"kind":"WRITE","substeps":["$240, $241","TO __stage10_output"]}],"writeRatioAvg":0.0010422094841063053}],"estimatedBytesProcessed":"686257544","timeline":[{"totalSlotMs":"1252","activeUnits":"13","completedUnits":"6","elapsedMs":"657","pendingUnits":"13"},{"totalSlotMs":"43142","activeUnits":"11","completedUnits":"309","elapsedMs":"1817","pendingUnits":"10"},{"totalSlotMs":"65112","activeUnits":"5","completedUnits":"321","elapsedMs":"4134","pendingUnits":"0"}],"statementType":"SELECT","totalBytesBilled":"686817280","totalPartitionsProcessed":"0","totalBytesProcessed":"686257544","cacheHit":false,"billingTier":1,"referencedTables":[{"projectId":"tpc-ds-2019","tableId":"date_dim","datasetId":"scale_10"},{"projectId":"tpc-ds-2019","tableId":"item","datasetId":"scale_10"},{"projectId":"tpc-ds-2019","tableId":"customer","datasetId":"scale_10"},{"projectId":"tpc-ds-2019","tableId":"customer_address","datasetId":"scale_10"},{"projectId":"tpc-ds-2019","tableId":"store_sales","datasetId":"scale_10"}]},"endTime":"1570971376983"},"jobReference":{"projectId":"tpc-ds-2019","location":"US","jobId":"query6_1570971371"},"etag":"vu3OuKqL3hy74RqV2K4r8g==","selfLink":"https://bigquery.googleapis.com/bigquery/v2/projects/tpc-ds-2019/jobs/query6_1570971371?location=US","configuration":{"query":{"maximumBillingTier":10,"defaultDataset":{"projectId":"tpc-ds-2019","datasetId":"scale_10"},"useLegacySql":false,"destinationTable":{"projectId":"tpc-ds-2019","tableId":"anon93ff491ac0bb40fb5d3eae5e255e43c04d82fd9d","datasetId":"_0ca6f7c7da88564ba26827da43395a8255e28ecd"},"priority":"INTERACTIVE","writeDisposition":"WRITE_TRUNCATE","createDisposition":"CREATE_IF_NEEDED","query":"-- query6\nSELECT a.ca_state state, \n Count(*) cnt \nFROM customer_address a, \n customer c, \n store_sales s, \n date_dim d, \n item i \nWHERE a.ca_address_sk = c.c_current_addr_sk \n AND c.c_customer_sk = s.ss_customer_sk \n AND s.ss_sold_date_sk = d.d_date_sk \n AND s.ss_item_sk = i.i_item_sk \n AND d.d_month_seq = (SELECT DISTINCT ( d_month_seq ) \n FROM date_dim \n WHERE d_year = 1998 \n AND d_moy = 7) \n AND i.i_current_price > 1.2 benchmark.sh bootstrap.sh data_gen.sh load_data.sh query Readme.md results warmup (SELECT Avg(j.i_current_price) \n FROM item j \n WHERE j.i_category = i.i_category) \nGROUP BY a.ca_state \nHAVING Count(*) >= 10 \nORDER BY cnt\nLIMIT 100; \n"},"jobType":"QUERY"},"id":"tpc-ds-2019:US.query6_1570971371","user_email":"nithish.sankaranarayanan@ulb.be"}
