{"status":{"state":"DONE"},"kind":"bigquery#job","statistics":{"totalSlotMs":"238698","creationTime":"1570992542732","totalBytesProcessed":"10875360681","startTime":"1570992542879","query":{"totalSlotMs":"238698","queryPlan":[{"readMsMax":"67","computeMsMax":"6","waitMsAvg":"1","id":"0","endMs":"1570992543174","waitMsMax":"1","startMs":"1570992543088","waitRatioMax":0.00014351320321469576,"readRatioAvg":0.009615384615384616,"parallelInputs":"1","recordsRead":"402","computeRatioAvg":0.0008610792192881745,"writeMsAvg":"6","status":"COMPLETE","writeMsMax":"6","computeMsAvg":"6","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0008610792192881745,"readMsAvg":"67","waitRatioAvg":0.00014351320321469576,"completedParallelInputs":"1","computeRatioMax":0.0008610792192881745,"name":"S00: Input","shuffleOutputBytes":"378","recordsWritten":"42","readRatioMax":0.009615384615384616,"steps":[{"kind":"READ","substeps":["$10:s_store_sk, $11:s_state","FROM store","WHERE in($11, 'TN', 'TN', 'TN', 'TN', 'TN', 'TN', 'TN', 'TN')"]},{"kind":"WRITE","substeps":["$10","TO __stage00_output","BY HASH($10)"]}],"writeRatioAvg":0.0008610792192881745},{"readMsMax":"11","computeMsMax":"181","waitMsAvg":"14","id":"1","endMs":"1570992543261","waitMsMax":"14","startMs":"1570992543132","waitRatioMax":0.0020091848450057405,"readRatioAvg":0.0015786452353616532,"parallelInputs":"1","recordsRead":"204000","computeRatioAvg":0.02597588978185993,"writeMsAvg":"15","status":"COMPLETE","writeMsMax":"15","computeMsAvg":"181","shuffleOutputBytesSpilled":"0","writeRatioMax":0.002152698048220436,"readMsAvg":"11","waitRatioAvg":0.0020091848450057405,"completedParallelInputs":"1","computeRatioMax":0.02597588978185993,"name":"S01: Input","shuffleOutputBytes":"6655961","recordsWritten":"204000","readRatioMax":0.0015786452353616532,"steps":[{"kind":"READ","substeps":["$1:i_item_sk, $2:i_class, $3:i_category","FROM item"]},{"kind":"WRITE","substeps":["$1, $2, $3","TO __stage01_output","BY HASH($1)"]}],"writeRatioAvg":0.002152698048220436},{"readMsMax":"14","computeMsMax":"9","waitMsAvg":"34","id":"2","endMs":"1570992543449","waitMsMax":"34","startMs":"1570992543174","waitRatioMax":0.004879448909299655,"readRatioAvg":0.0020091848450057405,"parallelInputs":"1","recordsRead":"73049","computeRatioAvg":0.0012916188289322618,"writeMsAvg":"70","status":"COMPLETE","writeMsMax":"70","computeMsAvg":"9","shuffleOutputBytesSpilled":"0","writeRatioMax":0.010045924225028703,"readMsAvg":"14","waitRatioAvg":0.004879448909299655,"completedParallelInputs":"1","computeRatioMax":0.0012916188289322618,"name":"S02: Input","shuffleOutputBytes":"3294","recordsWritten":"366","readRatioMax":0.0020091848450057405,"steps":[{"kind":"READ","substeps":["$30:d_date_sk, $31:d_year","FROM date_dim","WHERE equal($31, 2000)"]},{"kind":"WRITE","substeps":["$30","TO __stage02_output","BY HASH($30)"]}],"writeRatioAvg":0.010045924225028703},{"readMsMax":"130","computeMsMax":"1155","inputStages":["0","1","2"],"waitMsAvg":"2","id":"4","endMs":"1570992552251","waitMsMax":"9","startMs":"1570992543532","waitRatioMax":0.0012916188289322618,"readRatioAvg":0.005166475315729047,"parallelInputs":"184","recordsRead":"319483995","computeRatioAvg":0.13246268656716417,"writeMsAvg":"46","status":"COMPLETE","writeMsMax":"6968","computeMsAvg":"923","shuffleOutputBytesSpilled":"0","writeRatioMax":1,"readMsAvg":"36","waitRatioAvg":0.0002870264064293915,"completedParallelInputs":"184","computeRatioMax":0.1657577497129736,"name":"S04: Join+","shuffleOutputBytes":"969388","recordsWritten":"24636","readRatioMax":0.018656716417910446,"steps":[{"kind":"READ","substeps":["$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_store_sk, $23:ss_ext_sales_price, $24:ss_net_profit","FROM store_sales"]},{"kind":"READ","substeps":["$30","FROM __stage02_output"]},{"kind":"READ","substeps":["$1, $2, $3","FROM __stage01_output"]},{"kind":"READ","substeps":["$10","FROM __stage00_output"]},{"kind":"AGGREGATE","substeps":["GROUP BY $110 := $101, $111 := $100","$70 := SUM($103)","$71 := SUM($102)"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $90 = $10"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $80 = $1"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $20 = $30"]},{"kind":"WRITE","substeps":["$111, $110, $70, $71","TO __stage04_output","BY HASH($110, $111)"]}],"writeRatioAvg":0.006601607347876005},{"readMsMax":"0","computeMsMax":"12","inputStages":["4"],"waitMsAvg":"0","id":"5","endMs":"1570992553139","waitMsMax":"1","startMs":"1570992552904","waitRatioMax":0.00014351320321469576,"readRatioAvg":0,"parallelInputs":"18","recordsRead":"24636","computeRatioAvg":0.0012916188289322618,"writeMsAvg":"24","status":"COMPLETE","writeMsMax":"33","computeMsAvg":"9","shuffleOutputBytesSpilled":"0","writeRatioMax":0.00473593570608496,"readMsAvg":"0","waitRatioAvg":0,"completedParallelInputs":"18","computeRatioMax":0.001722158438576349,"name":"S05: Aggregate+","shuffleOutputBytes":"5084","recordsWritten":"178","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$111, $110, $70, $71","FROM __stage04_output"]},{"kind":"COMPUTE","substeps":["$50 := divide($60, $61)"]},{"kind":"AGGREGATE","substeps":["GROUP BY $120 := $110, $121 := $111","$60 := SUM($70)","$61 := SUM($71)"]},{"kind":"WRITE","substeps":["$121, $120, $50","TO __stage05_output","BY HASH($120, $121)"]}],"writeRatioAvg":0.003444316877152698},{"readMsMax":"0","computeMsMax":"6","inputStages":["5"],"waitMsAvg":"1","id":"6","endMs":"1570992553225","waitMsMax":"1","startMs":"1570992553148","waitRatioMax":0.00014351320321469576,"readRatioAvg":0,"parallelInputs":"18","recordsRead":"178","computeRatioAvg":0.000574052812858783,"writeMsAvg":"42","status":"COMPLETE","writeMsMax":"54","computeMsAvg":"4","shuffleOutputBytesSpilled":"0","writeRatioMax":0.007749712973593571,"readMsAvg":"0","waitRatioAvg":0.00014351320321469576,"completedParallelInputs":"18","computeRatioMax":0.0008610792192881745,"name":"S06: Sort+","shuffleOutputBytes":"6686","recordsWritten":"178","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$121, $120, $50","FROM __stage05_output"]},{"kind":"SORT","substeps":["$141 ASC, $40 ASC","LIMIT 100"]},{"kind":"ANALYTIC_FUNCTION","substeps":["$40 := RANK() OVER (PARTITION BY $131, $130 ORDER BY $132 ASC)"]},{"kind":"SORT","substeps":["$120 ASC, $121 ASC, $50 ASC"]},{"kind":"WRITE","substeps":["$150, $151, $152, $153","TO __stage06_output"]}],"writeRatioAvg":0.006027554535017222},{"readMsMax":"0","computeMsMax":"7","inputStages":["6"],"waitMsAvg":"3","id":"7","endMs":"1570992553290","waitMsMax":"3","startMs":"1570992553169","waitRatioMax":0.00043053960964408724,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"178","computeRatioAvg":0.0010045924225028703,"writeMsAvg":"6","status":"COMPLETE","writeMsMax":"6","computeMsAvg":"7","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0008610792192881745,"readMsAvg":"0","waitRatioAvg":0.00043053960964408724,"completedParallelInputs":"1","computeRatioMax":0.0010045924225028703,"name":"S07: Output","shuffleOutputBytes":"3521","recordsWritten":"100","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$150, $151, $152, $153","FROM __stage06_output"]},{"kind":"SORT","substeps":["$151 ASC, $152 ASC","LIMIT 100"]},{"kind":"WRITE","substeps":["$160, $161, $162, $163","TO __stage07_output"]}],"writeRatioAvg":0.0008610792192881745}],"estimatedBytesProcessed":"10875360681","timeline":[{"totalSlotMs":"22768","activeUnits":"184","completedUnits":"3","elapsedMs":"710","pendingUnits":"184"},{"totalSlotMs":"210229","activeUnits":"3","completedUnits":"186","elapsedMs":"2389","pendingUnits":"1"},{"totalSlotMs":"238698","activeUnits":"0","completedUnits":"224","elapsedMs":"10527","pendingUnits":"0"},{"totalSlotMs":"238698","activeUnits":"0","completedUnits":"224","elapsedMs":"11556","pendingUnits":"0"}],"statementType":"SELECT","totalBytesBilled":"10875830272","totalPartitionsProcessed":"0","totalBytesProcessed":"10875360681","cacheHit":false,"billingTier":1,"referencedTables":[{"projectId":"tpc-ds-2019","tableId":"date_dim","datasetId":"scale_100"},{"projectId":"tpc-ds-2019","tableId":"store_sales","datasetId":"scale_100"},{"projectId":"tpc-ds-2019","tableId":"item","datasetId":"scale_100"},{"projectId":"tpc-ds-2019","tableId":"store","datasetId":"scale_100"}]},"endTime":"1570992554460"},"jobReference":{"projectId":"tpc-ds-2019","location":"US","jobId":"query36_1570992540"},"etag":"rSdWzaoqH/S7yLSrFt8atQ==","selfLink":"https://bigquery.googleapis.com/bigquery/v2/projects/tpc-ds-2019/jobs/query36_1570992540?location=US","configuration":{"query":{"maximumBillingTier":10,"defaultDataset":{"projectId":"tpc-ds-2019","datasetId":"scale_100"},"useLegacySql":false,"destinationTable":{"projectId":"tpc-ds-2019","tableId":"anon7f2005e2d6ce2d870f12462316f4baa35d84f488","datasetId":"_0ca6f7c7da88564ba26827da43395a8255e28ecd"},"priority":"INTERACTIVE","writeDisposition":"WRITE_TRUNCATE","createDisposition":"CREATE_IF_NEEDED","query":"-- query36\nSELECT Sum(ss_net_profit) / Sum(ss_ext_sales_price) AS \n gross_margin, \n i_category, \n i_class, \n Rank() \n OVER ( \n PARTITION BY i_category, i_class \n ORDER BY Sum(ss_net_profit)/Sum(ss_ext_sales_price) ASC) AS \n rank_within_parent \nFROM store_sales, \n date_dim d1, \n item, \n store \nWHERE d1.d_year = 2000 \n AND d1.d_date_sk = ss_sold_date_sk \n AND i_item_sk = ss_item_sk \n AND s_store_sk = ss_store_sk \n AND s_state IN ( 'TN', 'TN', 'TN', 'TN', \n 'TN', 'TN', 'TN', 'TN' ) \nGROUP BY i_category, i_class \nORDER BY i_category, \n rank_within_parent\nLIMIT 100; \n"},"jobType":"QUERY"},"id":"tpc-ds-2019:US.query36_1570992540","user_email":"nithish.sankaranarayanan@ulb.be"}
