{"status":{"state":"DONE"},"kind":"bigquery#job","statistics":{"totalSlotMs":"3203","creationTime":"1570903759105","totalBytesProcessed":"112732160","startTime":"1570903759268","query":{"totalSlotMs":"3203","queryPlan":[{"readMsMax":"37","computeMsMax":"9","waitMsAvg":"1","id":"0","endMs":"1570903759663","waitMsMax":"1","startMs":"1570903759423","waitRatioMax":0.0004985044865403788,"readRatioAvg":0.018444666001994018,"parallelInputs":"1","recordsRead":"12","computeRatioAvg":0.00448654037886341,"writeMsAvg":"6","status":"COMPLETE","writeMsMax":"6","computeMsAvg":"9","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0029910269192422734,"readMsAvg":"37","waitRatioAvg":0.0004985044865403788,"completedParallelInputs":"1","computeRatioMax":0.00448654037886341,"name":"S00: Input","shuffleOutputBytes":"108","recordsWritten":"12","readRatioMax":0.018444666001994018,"steps":[{"kind":"READ","substeps":["$10:s_store_sk, $11:s_state","FROM store","WHERE in($11, 'TN', 'TN', 'TN', 'TN', 'TN', 'TN', 'TN', 'TN')"]},{"kind":"WRITE","substeps":["$10","TO __stage00_output","BY HASH($10)"]}],"writeRatioAvg":0.0029910269192422734},{"readMsMax":"8","computeMsMax":"25","waitMsAvg":"25","id":"1","endMs":"1570903759674","waitMsMax":"25","startMs":"1570903759466","waitRatioMax":0.012462612163509471,"readRatioAvg":0.003988035892323031,"parallelInputs":"1","recordsRead":"18000","computeRatioAvg":0.012462612163509471,"writeMsAvg":"179","status":"COMPLETE","writeMsMax":"179","computeMsAvg":"25","shuffleOutputBytesSpilled":"0","writeRatioMax":0.08923230309072781,"readMsAvg":"8","waitRatioAvg":0.012462612163509471,"completedParallelInputs":"1","computeRatioMax":0.012462612163509471,"name":"S01: Input","shuffleOutputBytes":"587452","recordsWritten":"18000","readRatioMax":0.003988035892323031,"steps":[{"kind":"READ","substeps":["$1:i_item_sk, $2:i_class, $3:i_category","FROM item"]},{"kind":"WRITE","substeps":["$1, $2, $3","TO __stage01_output","BY HASH($1)"]}],"writeRatioAvg":0.08923230309072781},{"readMsMax":"10","computeMsMax":"6","waitMsAvg":"51","id":"2","endMs":"1570903759597","waitMsMax":"51","startMs":"1570903759510","waitRatioMax":0.025423728813559324,"readRatioAvg":0.004985044865403789,"parallelInputs":"1","recordsRead":"73049","computeRatioAvg":0.0029910269192422734,"writeMsAvg":"53","status":"COMPLETE","writeMsMax":"53","computeMsAvg":"6","shuffleOutputBytesSpilled":"0","writeRatioMax":0.02642073778664008,"readMsAvg":"10","waitRatioAvg":0.025423728813559324,"completedParallelInputs":"1","computeRatioMax":0.0029910269192422734,"name":"S02: Input","shuffleOutputBytes":"3294","recordsWritten":"366","readRatioMax":0.004985044865403789,"steps":[{"kind":"READ","substeps":["$30:d_date_sk, $31:d_year","FROM date_dim","WHERE equal($31, 2000)"]},{"kind":"WRITE","substeps":["$30","TO __stage02_output","BY HASH($30)"]}],"writeRatioAvg":0.02642073778664008},{"readMsMax":"39","computeMsMax":"2006","inputStages":["0","1","2"],"waitMsAvg":"1","id":"5","endMs":"1570903760878","waitMsMax":"1","startMs":"1570903759754","waitRatioMax":0.0004985044865403788,"readRatioAvg":0.019441674975074777,"parallelInputs":"1","recordsRead":"2899556","computeRatioAvg":1,"writeMsAvg":"5","status":"COMPLETE","writeMsMax":"5","computeMsAvg":"2006","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0024925224327018943,"readMsAvg":"39","waitRatioAvg":0.0004985044865403788,"completedParallelInputs":"1","computeRatioMax":1,"name":"S05: Join+","shuffleOutputBytes":"4892","recordsWritten":"122","readRatioMax":0.019441674975074777,"steps":[{"kind":"READ","substeps":["$20:ss_sold_date_sk, $21:ss_item_sk, $22:ss_store_sk, $23:ss_ext_sales_price, $24:ss_net_profit","FROM store_sales"]},{"kind":"READ","substeps":["$30","FROM __stage02_output"]},{"kind":"READ","substeps":["$1, $2, $3","FROM __stage01_output"]},{"kind":"READ","substeps":["$10","FROM __stage00_output"]},{"kind":"AGGREGATE","substeps":["GROUP BY $110 := $101, $111 := $100","$70 := SUM($103)","$71 := SUM($102)"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $90 = $10"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $80 = $1"]},{"kind":"JOIN","substeps":["INNER HASH JOIN EACH WITH ALL ON $20 = $30"]},{"kind":"WRITE","substeps":["$111, $110, $70, $71","TO __stage05_output","BY HASH($110, $111)"]}],"writeRatioAvg":0.0024925224327018943},{"readMsMax":"0","computeMsMax":"7","inputStages":["5"],"waitMsAvg":"1","id":"6","endMs":"1570903761234","waitMsMax":"1","startMs":"1570903761183","waitRatioMax":0.0004985044865403788,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"122","computeRatioAvg":0.003489531405782652,"writeMsAvg":"26","status":"COMPLETE","writeMsMax":"26","computeMsAvg":"7","shuffleOutputBytesSpilled":"0","writeRatioMax":0.01296111665004985,"readMsAvg":"0","waitRatioAvg":0.0004985044865403788,"completedParallelInputs":"1","computeRatioMax":0.003489531405782652,"name":"S06: Aggregate+","shuffleOutputBytes":"3794","recordsWritten":"122","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$111, $110, $70, $71","FROM __stage05_output"]},{"kind":"COMPUTE","substeps":["$50 := divide($60, $61)"]},{"kind":"AGGREGATE","substeps":["GROUP BY $120 := $110, $121 := $111","$60 := SUM($70)","$61 := SUM($71)"]},{"kind":"WRITE","substeps":["$121, $120, $50","TO __stage06_output","BY HASH($120, $121)"]}],"writeRatioAvg":0.01296111665004985},{"readMsMax":"0","computeMsMax":"5","inputStages":["6"],"waitMsAvg":"1","id":"7","endMs":"1570903761308","waitMsMax":"1","startMs":"1570903761240","waitRatioMax":0.0004985044865403788,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"122","computeRatioAvg":0.0024925224327018943,"writeMsAvg":"48","status":"COMPLETE","writeMsMax":"48","computeMsAvg":"5","shuffleOutputBytesSpilled":"0","writeRatioMax":0.023928215353938187,"readMsAvg":"0","waitRatioAvg":0.0004985044865403788,"completedParallelInputs":"1","computeRatioMax":0.0024925224327018943,"name":"S07: Sort+","shuffleOutputBytes":"4010","recordsWritten":"100","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$121, $120, $50","FROM __stage06_output"]},{"kind":"SORT","substeps":["$141 ASC, $40 ASC","LIMIT 100"]},{"kind":"ANALYTIC_FUNCTION","substeps":["$40 := RANK() OVER (PARTITION BY $131, $130 ORDER BY $132 ASC)"]},{"kind":"SORT","substeps":["$120 ASC, $121 ASC, $50 ASC"]},{"kind":"WRITE","substeps":["$150, $151, $152, $153","TO __stage07_output"]}],"writeRatioAvg":0.023928215353938187},{"readMsMax":"0","computeMsMax":"5","inputStages":["7"],"waitMsAvg":"1","id":"8","endMs":"1570903761327","waitMsMax":"1","startMs":"1570903761261","waitRatioMax":0.0004985044865403788,"readRatioAvg":0,"parallelInputs":"1","recordsRead":"100","computeRatioAvg":0.0024925224327018943,"writeMsAvg":"5","status":"COMPLETE","writeMsMax":"5","computeMsAvg":"5","shuffleOutputBytesSpilled":"0","writeRatioMax":0.0024925224327018943,"readMsAvg":"0","waitRatioAvg":0.0004985044865403788,"completedParallelInputs":"1","computeRatioMax":0.0024925224327018943,"name":"S08: Output","shuffleOutputBytes":"4010","recordsWritten":"100","readRatioMax":0,"steps":[{"kind":"READ","substeps":["$150, $151, $152, $153","FROM __stage07_output"]},{"kind":"SORT","substeps":["$151 ASC, $152 ASC","LIMIT 100"]},{"kind":"WRITE","substeps":["$160, $161, $162, $163","TO __stage08_output"]}],"writeRatioAvg":0.0024925224327018943}],"estimatedBytesProcessed":"112732160","timeline":[{"totalSlotMs":"584","activeUnits":"1","completedUnits":"3","elapsedMs":"656","pendingUnits":"1"},{"totalSlotMs":"3203","activeUnits":"1","completedUnits":"7","elapsedMs":"2216","pendingUnits":"0"}],"statementType":"SELECT","totalBytesBilled":"113246208","totalPartitionsProcessed":"0","totalBytesProcessed":"112732160","cacheHit":false,"billingTier":1,"referencedTables":[{"projectId":"tpc-ds-2019","tableId":"date_dim","datasetId":"scale_1"},{"projectId":"tpc-ds-2019","tableId":"store","datasetId":"scale_1"},{"projectId":"tpc-ds-2019","tableId":"store_sales","datasetId":"scale_1"},{"projectId":"tpc-ds-2019","tableId":"item","datasetId":"scale_1"}]},"endTime":"1570903761782"},"jobReference":{"projectId":"tpc-ds-2019","location":"US","jobId":"query36_1570903756"},"etag":"vrY5Bw8UNyDsvFSs93n4UQ==","selfLink":"https://bigquery.googleapis.com/bigquery/v2/projects/tpc-ds-2019/jobs/query36_1570903756?location=US","configuration":{"query":{"maximumBillingTier":10,"defaultDataset":{"projectId":"tpc-ds-2019","datasetId":"scale_1"},"useLegacySql":false,"destinationTable":{"projectId":"tpc-ds-2019","tableId":"anon0fe2c9db8aeb953dcc4232e9efc441036a7e1ce3","datasetId":"_0ca6f7c7da88564ba26827da43395a8255e28ecd"},"priority":"INTERACTIVE","writeDisposition":"WRITE_TRUNCATE","createDisposition":"CREATE_IF_NEEDED","query":"-- query36\nSELECT Sum(ss_net_profit) / Sum(ss_ext_sales_price) AS \n gross_margin, \n i_category, \n i_class, \n Rank() \n OVER ( \n PARTITION BY i_category, i_class \n ORDER BY Sum(ss_net_profit)/Sum(ss_ext_sales_price) ASC) AS \n rank_within_parent \nFROM store_sales, \n date_dim d1, \n item, \n store \nWHERE d1.d_year = 2000 \n AND d1.d_date_sk = ss_sold_date_sk \n AND i_item_sk = ss_item_sk \n AND s_store_sk = ss_store_sk \n AND s_state IN ( 'TN', 'TN', 'TN', 'TN', \n 'TN', 'TN', 'TN', 'TN' ) \nGROUP BY i_category, i_class \nORDER BY i_category, \n rank_within_parent\nLIMIT 100; \n"},"jobType":"QUERY"},"id":"tpc-ds-2019:US.query36_1570903756","user_email":"nithish.sankaranarayanan@ulb.be"}
